import{d as z,r as V,a as $,b as r,o as U,c as x,w as t,e,f as c,g as L,E as D,j as R,u as f,k as B}from"./index-ffc0e89f.js";import{u as H}from"./index-954ad8b2.js";import{u as S,a as O}from"./baseClass-3b015b44.js";const j=z({__name:"add-or-update",emits:["refreshDataList"],setup(F,{expose:s,emit:v}){const b=v,i=V(!1),g=V(),a=$({id:"",packageName:"",code:"",fields:"",remark:""}),w=u=>{i.value=!0,a.id="",g.value&&g.value.resetFields(),u&&k(u)},k=u=>{S(u).then(l=>{Object.assign(a,l.data)})},C=V({packageName:[{required:!0,message:"必填项不能为空",trigger:"blur"}],code:[{required:!0,message:"必填项不能为空",trigger:"blur"}],fields:[{required:!0,message:"必填项不能为空",trigger:"blur"}]}),n=()=>{g.value.validate(u=>{if(!u)return!1;O(a).then(()=>{D.success({message:"操作成功",duration:500,onClose:()=>{i.value=!1,b("refreshDataList")}})})})};return s({init:w}),(u,l)=>{const d=r("el-input"),_=r("el-form-item"),p=r("el-form"),y=r("el-button"),h=r("el-drawer");return U(),x(h,{modelValue:i.value,"onUpdate:modelValue":l[7]||(l[7]=o=>i.value=o),size:"60%",title:a.id?"修改":"新增","close-on-click-modal":!1},{footer:t(()=>[e(y,{onClick:l[5]||(l[5]=o=>i.value=!1)},{default:t(()=>[c("取消")]),_:1}),e(y,{type:"primary",onClick:l[6]||(l[6]=o=>n())},{default:t(()=>[c("确定")]),_:1})]),default:t(()=>[e(p,{ref_key:"dataFormRef",ref:g,model:a,rules:C.value,"label-width":"120px",onKeyup:l[4]||(l[4]=L(o=>n(),["enter"]))},{default:t(()=>[e(_,{label:"基类编码",prop:"code"},{default:t(()=>[e(d,{modelValue:a.code,"onUpdate:modelValue":l[0]||(l[0]=o=>a.code=o),placeholder:"基类编码"},null,8,["modelValue"])]),_:1}),e(_,{label:"基类包名",prop:"packageName"},{default:t(()=>[e(d,{modelValue:a.packageName,"onUpdate:modelValue":l[1]||(l[1]=o=>a.packageName=o),placeholder:"基类包名"},null,8,["modelValue"])]),_:1}),e(_,{label:"基类字段",prop:"fields"},{default:t(()=>[e(d,{modelValue:a.fields,"onUpdate:modelValue":l[2]||(l[2]=o=>a.fields=o),placeholder:"基类字段，多个字段，用英文逗号分隔"},null,8,["modelValue"])]),_:1}),e(_,{label:"备注",prop:"remark"},{default:t(()=>[e(d,{modelValue:a.remark,"onUpdate:modelValue":l[3]||(l[3]=o=>a.remark=o),placeholder:"备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}}),M=z({__name:"index",setup(F){const s=$({dataListUrl:"/gen/baseclass/page",deleteUrl:"/gen/baseclass",queryForm:{code:""}}),v=V(),b=C=>{v.value.init(C)},{getDataList:i,selectionChangeHandle:g,sizeChangeHandle:a,currentChangeHandle:w,deleteBatchHandle:k}=H(s);return(C,n)=>{const u=r("el-input"),l=r("el-form-item"),d=r("el-button"),_=r("el-form"),p=r("el-table-column"),y=r("el-table"),h=r("el-pagination"),o=r("el-card"),N=R("loading");return U(),x(o,null,{default:t(()=>[e(_,{inline:!0,model:s.queryForm,onKeyup:n[4]||(n[4]=L(m=>f(i)(),["enter"]))},{default:t(()=>[e(l,null,{default:t(()=>[e(l,null,{default:t(()=>[e(u,{modelValue:s.queryForm.code,"onUpdate:modelValue":n[0]||(n[0]=m=>s.queryForm.code=m),placeholder:"基类编码"},null,8,["modelValue"])]),_:1})]),_:1}),e(l,null,{default:t(()=>[e(d,{onClick:n[1]||(n[1]=m=>f(i)())},{default:t(()=>[c("查询")]),_:1})]),_:1}),e(l,null,{default:t(()=>[e(d,{type:"primary",onClick:n[2]||(n[2]=m=>b())},{default:t(()=>[c("新增")]),_:1})]),_:1}),e(l,null,{default:t(()=>[e(d,{type:"danger",onClick:n[3]||(n[3]=m=>f(k)())},{default:t(()=>[c("删除")]),_:1})]),_:1})]),_:1},8,["model"]),B((U(),x(y,{data:s.dataList,border:"",style:{width:"100%"},onSelectionChange:f(g)},{default:t(()=>[e(p,{type:"selection","header-align":"center",align:"center",width:"50"}),e(p,{prop:"code",label:"基类编码","header-align":"center",align:"center"}),e(p,{prop:"packageName",label:"基类包名","show-overflow-tooltip":"","header-align":"center",align:"center"}),e(p,{prop:"fields",label:"基类字段","show-overflow-tooltip":"","header-align":"center",align:"center"}),e(p,{prop:"remark",label:"备注","show-overflow-tooltip":"","header-align":"center",align:"center"}),e(p,{label:"操作",fixed:"right","header-align":"center",align:"center",width:"150"},{default:t(m=>[e(d,{type:"primary",link:"",onClick:q=>b(m.row.id)},{default:t(()=>[c("编辑")]),_:2},1032,["onClick"]),e(d,{type:"primary",link:"",onClick:q=>f(k)(m.row.id)},{default:t(()=>[c("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onSelectionChange"])),[[N,s.dataListLoading]]),e(h,{"current-page":s.page,"page-sizes":s.pageSizes,"page-size":s.limit,total:s.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:f(a),onCurrentChange:f(w)},null,8,["current-page","page-sizes","page-size","total","onSizeChange","onCurrentChange"]),e(j,{ref_key:"addOrUpdateRef",ref:v,onRefreshDataList:f(i)},null,8,["onRefreshDataList"])]),_:1})}}});export{M as default};
